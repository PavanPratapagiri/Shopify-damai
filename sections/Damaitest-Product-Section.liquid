{% assign variant = product.selected_or_first_available_variant %}

<section class="product-page max-w-6xl mx-auto px-4 py-12 grid md:grid-cols-2 gap-8">
  <!-- Product Images -->
  <div>
    {% for image in product.images %}
      <div class="mb-4">
        <img src="{{ image | img_url: '800x' }}" alt="{{ image.alt | escape }}" class="rounded shadow">
      </div>
    {% endfor %}
  </div>

  <!-- Product Info -->
  <div>
    <h1 class="text-3xl font-bold text-gray-900 mb-3">{{ product.title }}</h1>
    <p class="text-sm text-gray-500 mb-6">{{ product.vendor }}</p>
    <div class="text-gray-700 mb-6">{{ product.description }}</div>

    <!-- Variant Selection -->
    {% if product.variants.size > 1 %}
      <form method="post" action="/cart/add">
        <label for="product-select" class="block text-sm font-medium text-gray-700 mb-2">Select Size</label>
        <select id="product-select" name="id" class="w-full border-gray-300 rounded shadow-sm mb-4 p-2">
          {% for variant in product.variants %}
            <option value="{{ variant.id }}" {% unless variant.available %}disabled{% endunless %}>
              {{ variant.title }} - {{ variant.price | money }} {% unless variant.available %}(Sold Out){% endunless %}
            </option>
          {% endfor %}
        </select>

        <button type="submit" class="bg-yellow-600 text-white px-6 py-3 rounded hover:bg-yellow-700 transition">
          Add to Cart
        </button>
      </form>
    {% else %}
      <form method="post" action="/cart/add">
        <input type="hidden" name="id" value="{{ product.variants.first.id }}">
        <button type="submit" class="bg-yellow-600 text-white px-6 py-3 rounded hover:bg-yellow-700 transition">
          Add to Cart
        </button>
      </form>
    {% endif %}

    <p class="mt-2 text-sm text-gray-500">Ships in 1â€“2 business days from Bali</p>
  </div>
</section>
